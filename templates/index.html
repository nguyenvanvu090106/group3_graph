<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Group3</title>
    <link rel="stylesheet" href="/static/css/style.css" />
  </head>
  <body>
    <div class="app-container">
      <div class="main-content">
        <div id="notification" class="notification-bar">
          Welcome! Select a tool or an algorithm to start.
        </div>

        <div class="canvas-wrapper">
          <canvas id="graphCanvas"></canvas>
        </div>
      </div>

      <aside class="sidebar">
        <h2 class="app-title">Graph Tool</h2>

        <div class="panel">
          <h4 class="panel-title">File</h4>
          <div class="btn-row">
            <button onclick="askToClear()" class="btn-danger">New</button>
            <button onclick="saveGraph()">Save Img</button>
          </div>
          <div class="btn-row" style="margin-top: 8px">
            <button onclick="undo()" title="Ctrl+Z">↶ Undo</button>
            <button onclick="redo()" title="Ctrl+Y">↷ Redo</button>
          </div>
        </div>

        <div class="panel">
          <h4 class="panel-title">Tools</h4>
          <div class="mode-grid">
            <button id="btn-move" class="btn-mode active" onclick="setMode('MOVE')">Move</button>
            <button id="btn-add-vertex" class="btn-mode" onclick="setMode('ADD_VERTEX')">
              Vertex
            </button>
            <button id="btn-add-edge" class="btn-mode" onclick="setMode('ADD_EDGE')">
              Connect
            </button>
            <button id="btn-remove" class="btn-mode" onclick="setMode('REMOVE')">Remove</button>
          </div>
        </div>

        <div class="panel">
          <h4 class="panel-title">Settings</h4>

          <div id="vertex-settings" style="display: none">
            <div class="setting-item">
              <label style="font-weight: 600">Naming:</label>
              <select
                id="enum-select"
                onchange="updateNamingMode()"
                style="width: 100%; padding: 5px"
              >
                <option value="0, 1, 2...">0, 1, 2...</option>
                <option value="1, 2, 3...">1, 2, 3...</option>
                <option value="A, B, C...">A, B, C...</option>
              </select>
            </div>
          </div>

          <div id="edge-settings" style="display: none">
            <div class="setting-item">
              <label
                ><input type="checkbox" id="chk-directed" onchange="toggleDirected()" /> Directed
                Graph</label
              >
            </div>
            <div class="setting-item">
              <label><input type="checkbox" id="chk-weighted" /> Weighted Edges</label>
            </div>
            <p style="font-size: 0.8rem; color: #666; margin-top: 5px; font-style: italic">
              * Click Source then Target.
            </p>
          </div>

          <div id="remove-settings" style="display: none">
            <div class="setting-item">
              <p style="font-size: 0.85rem; color: #666; margin-bottom: 10px">
                Click Node/Edge to delete instantly.
              </p>
              <button onclick="askToClear()" class="btn-danger full-width">REMOVE ALL</button>
            </div>
          </div>

          <div id="algo-settings" style="display: none">
            <p style="font-size: 0.9rem; color: #3498db; text-align: center; margin-bottom: 10px">
              Mode: <b>Algorithm Input</b>
            </p>
            <button onclick="cancelAlgorithm()" class="btn-cancel full-width">
              Cancel Algorithm
            </button>
          </div>

          <div
            id="no-settings"
            style="
              color: #888;
              font-style: italic;
              font-size: 0.85rem;
              text-align: center;
              padding: 10px;
            "
          >
            Select a tool to see settings.
          </div>
        </div>

        <div class="panel">
          <h4 class="panel-title">Algorithms</h4>
          <select id="algo-select" onchange="prepareAlgorithm()">
            <option value="">-- Select Algorithm --</option>
            <optgroup label="Traversal">
              <option value="bfs">BFS (Breadth First Search)</option>
              <option value="dfs">DFS (Depth First Search)</option>
            </optgroup>
            <optgroup label="Shortest Path">
              <option value="dijkstra">Dijkstra's Algorithm</option>
            </optgroup>
            <optgroup label="MST">
              <option value="prim">Prim's Algorithm</option>
              <option value="kruskal">Kruskal's Algorithm</option>
            </optgroup>
            <optgroup label="Euler">
              <option value="fleury">Fleury's Algorithm</option>
              <option value="hierholzer">Hierholzer's Algorithm</option>
            </optgroup>
            <optgroup label="Flow">
              <option value="max_flow">Max Flow (Ford-Fulkerson)</option>
            </optgroup>
            <optgroup label="Check">
              <option value="bipartite">Check Bipartite</option>
            </optgroup>
          </select>
        </div>

        <div class="panel">
          <h4 class="panel-title">Data View</h4>
          <div class="btn-row">
            <button onclick="getRepresentation('matrix')">Matrix</button>
            <button onclick="getRepresentation('adj_list')">Adj List</button>
            <button onclick="getRepresentation('edge_list')">Edge List</button>
          </div>
        </div>
      </aside>
    </div>

    <div id="modal-overlay" class="modal-overlay" style="display: none">
      <div id="weight-modal" class="modal-box" style="display: none">
        <h3>Enter Edge Weight</h3>
        <input type="number" id="modal-weight-input" value="1" class="modal-input" autofocus />
        <div class="modal-actions">
          <button onclick="closeModal()" class="btn-cancel">Cancel</button>
          <button onclick="confirmAddEdge()" class="btn-confirm">OK</button>
        </div>
      </div>

      <div id="clear-modal" class="modal-box" style="display: none">
        <h3 style="color: #e74c3c">⚠️ Clear Graph?</h3>
        <p>This action cannot be undone.</p>
        <div class="modal-actions">
          <button onclick="closeModal()" class="btn-cancel">Cancel</button>
          <button onclick="performClear()" class="btn-danger">Yes, Clear All</button>
        </div>
      </div>

      <div id="result-text-modal" class="modal-box" style="display: none; width: 400px">
        <h3>Representation</h3>
        <textarea
          id="result-textarea"
          rows="10"
          style="width: 100%; border: 1px solid #ccc; font-family: monospace"
        ></textarea>
        <div class="modal-actions">
          <button onclick="closeModal()" class="btn-confirm">Close</button>
        </div>
      </div>
    </div>

    <script src="/static/js/script.js"></script>
  </body>
</html>
